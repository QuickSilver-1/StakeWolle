# StakeWolle
 ![Build Status](https://github.com/QuickSilver-1/VK-Golang-Internship/actions/workflows/go.yml/badge.svg)

 <h3>Реферальная система в рамках технического задания для отбора на стажировку в компанию Stakewolle</h3>

 <h2>Структура проекта</h2>

<code>
/StakeWolle
│
├── /api
│   └── /swagger.yml 
├── /internal
│   └── /config 
│   |   └── config.go - файл с конфигами
│   └── /dbhandlers  - пакет с функциями взаимодействия с СУБД
│   |   └── collectCRUD.go
│   |   └── refCRUD.go
│   |   └── userCRUD.go
│   └── /handlers - пакет с обработчиками входящий запросов
│   |   └── refhandler.go
│   |   └── struct.go
│   |   └── userhandler.go
│   └── /migrations - миграции БД
│   |   └── ...
│   └── /serverbuilder - функция подключения хэндлеров к серверу веб-сервера
│       └── serverbuilder.go
├── /cmd
│   └── /referal
│       └── main.go - ОСНОВНОЙ ПАКЕТ
├── /log
│   └── log.log - файл с логами
├── /pkg
│   └── /db - пакет с подключением к СУБД
│   |   └── clear.go - функция для сверки актуальности реферальных кодов
|   |   └── connect.go
|   |   └── redis.go
│   └── /log - пакет с конфигурацией логгера
│   |   └── logger.go
|   └── /server - пакет с конфигурацей веб-сервера
│       └── httpserver.go - сервер
|       └── jwt.go - модуль для работы с jwt
|       └── middleware.go - мидлвары
├── Dockerfile - файл создания образа докер
├── go.mod
└── go.sum
</code>

<h2>Запуск</h2>

Запустить сервер можно одним из двух способов
<ul>
<li>Для запуска сервера необходимо прописать команду <code>go run cmd/referal/main.go</code></li>
<li>Собрать и запустить докер образ</li>
</ul>

<h2>Общее описание</h2>
Спасибо за интересную задачу, было интересно делать. Реализовал все необходимые функции, а также дополнительно сделал кэширование через Redis. В качестве основной базы данных использовался PostgreSQL. В пакет <code>pkg</code> я складывал модули, которые в будущем потенциально могу использовать повторно. В <code>Internal</code> - всё остальное. 
Написал небольшую защиту от брут форса - ограничение на кол-во запросов в секунду. Также аунтификацию через JWT. После входа в систему выдается токен, который затем необходимо передавать через Заголовок <code>Authorization</code>
<h3>Спецификацию api можно посмотреть в папке api</h3>
